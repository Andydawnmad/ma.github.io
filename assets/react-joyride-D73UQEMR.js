import{r as m,R as G}from"./react-QfoCmFaQ.js";import{e as at}from"./@gilbarbara-CQoQLGZn.js";import{s as T}from"./is-lite-Ce_qFKpb.js";import{t as K}from"./tree-changes-fs5NfJf2.js";import{s as ct}from"./scroll-IOCIOz97.js";import{s as tt}from"./scrollparent-CBWYslax.js";import{r as V}from"./react-dom-Bfz8IwUc.js";import{d as R}from"./deepmerge-D1tYetAS.js";import{R as pt}from"./react-floater-B1ePm3zE.js";import{i as dt}from"./react-innertext-QpEmmNc9.js";var ut=Object.defineProperty,ht=(t,s,e)=>s in t?ut(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,l=(t,s,e)=>(ht(t,typeof s!="symbol"?s+"":s,e),e),y={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},x={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found",ERROR:"error"},h={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},f={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"};function I(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function et(t){return t?t.getBoundingClientRect():null}function ft(t=!0){const{body:s,documentElement:e}=document;if(!s||!e)return 0;if(t){const o=[s.scrollHeight,s.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight].sort((n,r)=>n-r),i=Math.floor(o.length/2);return o.length%2===0?(o[i-1]+o[i])/2:o[i]}return Math.max(s.scrollHeight,s.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}function L(t){return typeof t=="string"?document.querySelector(t):t}function mt(t){return!t||t.nodeType!==1?null:getComputedStyle(t)}function Y(t,s,e){if(!t)return D();const o=tt(t);if(o){if(o.isSameNode(D()))return e?document:D();if(!(o.scrollHeight>o.offsetHeight)&&!s)return o.style.overflow="initial",D()}return o}function W(t,s){if(!t)return!1;const e=Y(t,s);return e?!e.isSameNode(D()):!1}function gt(t){return t.offsetParent!==document.body}function H(t,s="fixed"){if(!t||!(t instanceof HTMLElement))return!1;const{nodeName:e}=t,o=mt(t);return e==="BODY"||e==="HTML"?!1:o&&o.position===s?!0:t.parentNode?H(t.parentNode,s):!1}function yt(t){var s;if(!t)return!1;let e=t;for(;e&&e!==document.body;){if(e instanceof HTMLElement){const{display:o,visibility:i}=getComputedStyle(e);if(o==="none"||i==="hidden")return!1}e=(s=e.parentElement)!=null?s:null}return!0}function bt(t,s,e){var o;const i=et(t),n=Y(t,e),r=W(t,e);let a=0,d=(o=i==null?void 0:i.top)!=null?o:0;return n instanceof HTMLElement&&(a=n.scrollTop,!r&&!H(t)&&(d+=a),n.isSameNode(D())||(d+=D().scrollTop)),Math.floor(d-s)}function St(t,s,e){var o;if(!t)return 0;const{offsetTop:i=0,scrollTop:n=0}=(o=tt(t))!=null?o:{};let r=t.getBoundingClientRect().top+n;i&&(W(t,e)||gt(t))&&(r-=i);const a=Math.floor(r-s);return a<0?0:a}function D(){var t;return(t=document.scrollingElement)!=null?t:document.documentElement}function Et(t,s){const{duration:e,element:o}=s;return new Promise((i,n)=>{const{scrollTop:r}=o,a=t>r?t-r:r-t;ct.top(o,t,{duration:a<100?50:e},d=>d&&d.message!=="Element already at target scroll position"?n(d):i())})}var U=V.createPortal!==void 0;function ot(t=navigator.userAgent){let s=t;return typeof window>"u"?s="node":document.documentMode?s="ie":/Edge/.test(t)?s="edge":window.opera||t.includes(" OPR/")?s="opera":typeof window.InstallTrigger<"u"?s="firefox":window.chrome?s="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(t)&&(s="safari"),s}function k(t){const s=[],e=o=>{if(typeof o=="string"||typeof o=="number")s.push(o);else if(Array.isArray(o))o.forEach(i=>e(i));else if(m.isValidElement(o)){const{children:i}=o.props;Array.isArray(i)?i.forEach(n=>e(n)):e(i)}};return e(t),s.join(" ").trim()}function Tt(t,s){return!T.plainObject(t)||!T.array(s)?!1:Object.keys(t).every(e=>s.includes(e))}function vt(t){const s=/^#?([\da-f])([\da-f])([\da-f])$/i,e=t.replace(s,(i,n,r,a)=>n+n+r+r+a+a),o=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e);return o?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:[]}function $(t){return t.disableBeacon||t.placement==="center"}function X(){return!["chrome","safari","firefox","opera"].includes(ot())}function B({data:t,debug:s=!1,title:e,warn:o=!1}){const i=o?console.warn||console.error:console.log;s&&(e&&t?(console.groupCollapsed(`%creact-joyride: ${e}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(t)?t.forEach(n=>{T.plainObject(n)&&n.key?i.apply(console,[n.key,n.value]):i.apply(console,[n])}):i.apply(console,[t]),console.groupEnd()):console.error("Missing title or data props"))}function Pt(t){return Object.keys(t)}function st(t,...s){if(!T.plainObject(t))throw new TypeError("Expected an object");const e={};for(const o in t)({}).hasOwnProperty.call(t,o)&&(s.includes(o)||(e[o]=t[o]));return e}function Ct(t,...s){if(!T.plainObject(t))throw new TypeError("Expected an object");if(!s.length)return t;const e={};for(const o in t)({}).hasOwnProperty.call(t,o)&&s.includes(o)&&(e[o]=t[o]);return e}function xt(t){const{isFirstStep:s,lifecycle:e,previousLifecycle:o,scrollToFirstStep:i,step:n,target:r}=t;return!n.disableScrolling&&(!s||i||e===h.TOOLTIP)&&n.placement!=="center"&&(!n.isFixed||!H(r))&&o!==e&&[h.BEACON,h.TOOLTIP].includes(e)}var Ot={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},it={back:"Back",close:"Close",last:"Last",next:"Next",open:"Open the dialog",skip:"Skip"},Nt={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:it,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},wt={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},It={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},z={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},q={borderRadius:4,position:"absolute"};function kt(t,s){var e,o,i,n,r;const{floaterProps:a,styles:d}=t,p=R((e=s==null?void 0:s.floaterProps)!=null?e:{},a??{}),u=R(d??{},(o=s==null?void 0:s.styles)!=null?o:{}),c=R(It,u.options||{});let{width:g}=c;window.innerWidth>480&&(g=380),"width"in c&&(g=typeof c.width=="number"&&window.innerWidth<c.width?window.innerWidth-30:c.width);const b={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:c.zIndex},C={beacon:{...z,display:"inline-block",height:c.beaconSize,position:"relative",width:c.beaconSize,zIndex:c.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:c.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${vt(c.primaryColor).join(",")}, 0.2)`,border:`2px solid ${c.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:c.backgroundColor,borderRadius:5,boxSizing:"border-box",color:c.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:g},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...z,backgroundColor:c.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...z,color:c.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...z,color:c.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...z,color:c.textColor,fontSize:14},overlay:{...b,backgroundColor:c.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...b},overlayLegacyCenter:{...b,backgroundColor:c.overlayColor},spotlight:{...q,backgroundColor:"gray"},spotlightLegacy:{...q,boxShadow:`0 0 0 9999px ${c.overlayColor}, ${c.spotlightShadow}`},floaterStyles:{arrow:{color:(r=(n=(i=p==null?void 0:p.styles)==null?void 0:i.arrow)==null?void 0:n.color)!=null?r:c.arrowColor},options:{zIndex:c.zIndex+100}},options:c};return R(C,u)}function Rt(t){return Ct(t,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function M(t,s){var e,o,i,n,r,a;const d=s??{},p=R.all([Nt,Rt(t),d],{isMergeableObject:T.plainObject}),u=kt(t,p),c=W(L(p.target),p.disableScrollParentFix),g=R.all([Ot,(e=t.floaterProps)!=null?e:{},(o=p.floaterProps)!=null?o:{}]);return g.offset=p.offset,g.styles=R((i=g.styles)!=null?i:{},u.floaterStyles),g.offset+=(r=(n=t.spotlightPadding)!=null?n:p.spotlightPadding)!=null?r:0,p.placementBeacon&&g.wrapperOptions&&(g.wrapperOptions.placement=p.placementBeacon),c&&g.options.preventOverflow&&(g.options.preventOverflow.boundariesElement="window"),{...p,locale:R.all([it,(a=t.locale)!=null?a:{},p.locale||{}]),floaterProps:g,styles:st(u,"floaterStyles")}}function nt(t,s=!1){return T.plainObject(t)?t.target?!0:(B({title:"validateStep",data:"target is missing from the step",warn:!0,debug:s}),!1):(B({title:"validateStep",data:"step must be an object",warn:!0,debug:s}),!1)}function Z(t,s=!1){return T.array(t)?t.every(e=>nt(e,s)):(B({title:"validateSteps",data:"steps must be an array",warn:!0,debug:s}),!1)}var rt={action:"init",controlled:!1,index:0,lifecycle:h.INIT,origin:null,size:0,status:f.IDLE},Q=Pt(st(rt,"controlled","size")),Lt=class{constructor(t){l(this,"beaconPopper"),l(this,"tooltipPopper"),l(this,"data",new Map),l(this,"listener"),l(this,"store",new Map),l(this,"addListener",i=>{this.listener=i}),l(this,"setSteps",i=>{const{size:n,status:r}=this.getState(),a={size:i.length,status:r};this.data.set("steps",i),r===f.WAITING&&!n&&i.length&&(a.status=f.RUNNING),this.setState(a)}),l(this,"getPopper",i=>i==="beacon"?this.beaconPopper:this.tooltipPopper),l(this,"setPopper",(i,n)=>{i==="beacon"?this.beaconPopper=n:this.tooltipPopper=n}),l(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),l(this,"close",(i=null)=>{const{index:n,status:r}=this.getState();r===f.RUNNING&&this.setState({...this.getNextState({action:y.CLOSE,index:n+1,origin:i})})}),l(this,"go",i=>{const{controlled:n,status:r}=this.getState();if(n||r!==f.RUNNING)return;const a=this.getSteps()[i];this.setState({...this.getNextState({action:y.GO,index:i}),status:a?r:f.FINISHED})}),l(this,"info",()=>this.getState()),l(this,"next",()=>{const{index:i,status:n}=this.getState();n===f.RUNNING&&this.setState(this.getNextState({action:y.NEXT,index:i+1}))}),l(this,"open",()=>{const{status:i}=this.getState();i===f.RUNNING&&this.setState({...this.getNextState({action:y.UPDATE,lifecycle:h.TOOLTIP})})}),l(this,"prev",()=>{const{index:i,status:n}=this.getState();n===f.RUNNING&&this.setState({...this.getNextState({action:y.PREV,index:i-1})})}),l(this,"reset",(i=!1)=>{const{controlled:n}=this.getState();n||this.setState({...this.getNextState({action:y.RESET,index:0}),status:i?f.RUNNING:f.READY})}),l(this,"skip",()=>{const{status:i}=this.getState();i===f.RUNNING&&this.setState({action:y.SKIP,lifecycle:h.INIT,status:f.SKIPPED})}),l(this,"start",i=>{const{index:n,size:r}=this.getState();this.setState({...this.getNextState({action:y.START,index:T.number(i)?i:n},!0),status:r?f.RUNNING:f.WAITING})}),l(this,"stop",(i=!1)=>{const{index:n,status:r}=this.getState();[f.FINISHED,f.SKIPPED].includes(r)||this.setState({...this.getNextState({action:y.STOP,index:n+(i?1:0)}),status:f.PAUSED})}),l(this,"update",i=>{var n,r;if(!Tt(i,Q))throw new Error(`State is not valid. Valid keys: ${Q.join(", ")}`);this.setState({...this.getNextState({...this.getState(),...i,action:(n=i.action)!=null?n:y.UPDATE,origin:(r=i.origin)!=null?r:null},!0)})});const{continuous:s=!1,stepIndex:e,steps:o=[]}=t??{};this.setState({action:y.INIT,controlled:T.number(e),continuous:s,index:T.number(e)?e:0,lifecycle:h.INIT,origin:null,status:o.length?f.READY:f.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(o)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...rt}}getNextState(t,s=!1){var e,o,i,n,r;const{action:a,controlled:d,index:p,size:u,status:c}=this.getState(),g=T.number(t.index)?t.index:p,b=d&&!s?p:Math.min(Math.max(g,0),u);return{action:(e=t.action)!=null?e:a,controlled:d,index:b,lifecycle:(o=t.lifecycle)!=null?o:h.INIT,origin:(i=t.origin)!=null?i:null,size:(n=t.size)!=null?n:u,status:b===u?f.FINISHED:(r=t.status)!=null?r:c}}getSteps(){const t=this.data.get("steps");return Array.isArray(t)?t:[]}hasUpdatedState(t){const s=JSON.stringify(t),e=JSON.stringify(this.getState());return s!==e}setState(t,s=!1){const e=this.getState(),{action:o,index:i,lifecycle:n,origin:r=null,size:a,status:d}={...e,...t};this.store.set("action",o),this.store.set("index",i),this.store.set("lifecycle",n),this.store.set("origin",r),this.store.set("size",a),this.store.set("status",d),s&&(this.store.set("controlled",t.controlled),this.store.set("continuous",t.continuous)),this.listener&&this.hasUpdatedState(e)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function _t(t){return new Lt(t)}function At({styles:t}){return m.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:t})}var Dt=At,Bt=class extends m.Component{constructor(){super(...arguments),l(this,"isActive",!1),l(this,"resizeTimeout"),l(this,"scrollTimeout"),l(this,"scrollParent"),l(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),l(this,"hideSpotlight",()=>{const{continuous:t,disableOverlay:s,lifecycle:e}=this.props,o=[h.BEACON,h.COMPLETE,h.ERROR];return s||(t?o.includes(e):e!==h.TOOLTIP)}),l(this,"handleMouseMove",t=>{const{mouseOverSpotlight:s}=this.state,{height:e,left:o,position:i,top:n,width:r}=this.spotlightStyles,a=i==="fixed"?t.clientY:t.pageY,d=i==="fixed"?t.clientX:t.pageX,p=a>=n&&a<=n+e,c=d>=o&&d<=o+r&&p;c!==s&&this.updateState({mouseOverSpotlight:c})}),l(this,"handleScroll",()=>{const{target:t}=this.props,s=L(t);if(this.scrollParent!==document){const{isScrolling:e}=this.state;e||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.updateState({isScrolling:!1,showSpotlight:!0})},50)}else H(s,"sticky")&&this.updateState({})}),l(this,"handleResize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.isActive&&this.forceUpdate()},100)})}componentDidMount(){const{debug:t,disableScrolling:s,disableScrollParentFix:e=!1,target:o}=this.props,i=L(o);this.scrollParent=Y(i??document.body,e,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(t){var s;const{lifecycle:e,spotlightClicks:o}=this.props,{changed:i}=K(t,this.props);i("lifecycle",h.TOOLTIP)&&((s=this.scrollParent)==null||s.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout(()=>{const{isScrolling:n}=this.state;n||this.updateState({showSpotlight:!0})},100)),(i("spotlightClicks")||i("disableOverlay")||i("lifecycle"))&&(o&&e===h.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):e!==h.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var t;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),(t=this.scrollParent)==null||t.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:t}=this.state,{disableOverlayClose:s,placement:e,styles:o}=this.props;let i=o.overlay;return X()&&(i=e==="center"?o.overlayLegacyCenter:o.overlayLegacy),{cursor:s?"default":"pointer",height:ft(),pointerEvents:t?"none":"auto",...i}}get spotlightStyles(){var t,s,e;const{showSpotlight:o}=this.state,{disableScrollParentFix:i=!1,spotlightClicks:n,spotlightPadding:r=0,styles:a,target:d}=this.props,p=L(d),u=et(p),c=H(p),g=bt(p,r,i);return{...X()?a.spotlightLegacy:a.spotlight,height:Math.round(((t=u==null?void 0:u.height)!=null?t:0)+r*2),left:Math.round(((s=u==null?void 0:u.left)!=null?s:0)-r),opacity:o?1:0,pointerEvents:n?"none":"auto",position:c?"fixed":"absolute",top:g,transition:"opacity 0.2s",width:Math.round(((e=u==null?void 0:u.width)!=null?e:0)+r*2)}}updateState(t){this.isActive&&this.setState(s=>({...s,...t}))}render(){const{showSpotlight:t}=this.state,{onClickOverlay:s,placement:e}=this.props,{hideSpotlight:o,overlayStyles:i,spotlightStyles:n}=this;if(o())return null;let r=e!=="center"&&t&&m.createElement(Dt,{styles:n});if(ot()==="safari"){const{mixBlendMode:a,zIndex:d,...p}=i;r=m.createElement("div",{style:{...p}},r),delete i.backgroundColor}return m.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:s,role:"presentation",style:i},r)}},Ft=class extends m.Component{constructor(){super(...arguments),l(this,"node",null)}componentDidMount(){const{id:t}=this.props;I()&&(this.node=document.createElement("div"),this.node.id=t,document.body.appendChild(this.node),U||this.renderReact15())}componentDidUpdate(){I()&&(U||this.renderReact15())}componentWillUnmount(){!I()||!this.node||(U||V.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!I())return;const{children:t}=this.props;this.node&&V.unstable_renderSubtreeIntoContainer(this,t,this.node)}renderReact16(){if(!I()||!U)return null;const{children:t}=this.props;return this.node?V.createPortal(t,this.node):null}render(){return U?this.renderReact16():null}},Mt=class{constructor(t,s){if(l(this,"element"),l(this,"options"),l(this,"canBeTabbed",e=>{const{tabIndex:o}=e;return o===null||o<0?!1:this.canHaveFocus(e)}),l(this,"canHaveFocus",e=>{const o=/input|select|textarea|button|object/,i=e.nodeName.toLowerCase();return(o.test(i)&&!e.getAttribute("disabled")||i==="a"&&!!e.getAttribute("href"))&&this.isVisible(e)}),l(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),l(this,"handleKeyDown",e=>{const{code:o="Tab"}=this.options;e.code===o&&this.interceptTab(e)}),l(this,"interceptTab",e=>{e.preventDefault();const o=this.findValidTabElements(),{shiftKey:i}=e;if(!o.length)return;let n=document.activeElement?o.indexOf(document.activeElement):0;n===-1||!i&&n+1===o.length?n=0:i&&n===0?n=o.length-1:n+=i?-1:1,o[n].focus()}),l(this,"isHidden",e=>{const o=e.offsetWidth<=0&&e.offsetHeight<=0,i=window.getComputedStyle(e);return o&&!e.innerHTML?!0:o&&i.getPropertyValue("overflow")!=="visible"||i.getPropertyValue("display")==="none"}),l(this,"isVisible",e=>{let o=e;for(;o;)if(o instanceof HTMLElement){if(o===document.body)break;if(this.isHidden(o))return!1;o=o.parentNode}return!0}),l(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),l(this,"checkFocus",e=>{document.activeElement!==e&&(e.focus(),window.requestAnimationFrame(()=>this.checkFocus(e)))}),l(this,"setFocus",()=>{const{selector:e}=this.options;if(!e)return;const o=this.element.querySelector(e);o&&window.requestAnimationFrame(()=>this.checkFocus(o))}),!(t instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=t,this.options=s,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},Ut=class extends m.Component{constructor(t){if(super(t),l(this,"beacon",null),l(this,"setBeaconRef",i=>{this.beacon=i}),t.beaconComponent)return;const s=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.id="joyride-beacon-animation",t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),s.appendChild(e)}componentDidMount(){const{shouldFocus:t}=this.props;setTimeout(()=>{T.domElement(this.beacon)&&t&&this.beacon.focus()},0)}componentWillUnmount(){const t=document.getElementById("joyride-beacon-animation");t!=null&&t.parentNode&&t.parentNode.removeChild(t)}render(){const{beaconComponent:t,continuous:s,index:e,isLastStep:o,locale:i,onClickOrHover:n,size:r,step:a,styles:d}=this.props,p=T.string(i.open)?i.open:dt(i.open),u={"aria-label":p,onClick:n,onMouseEnter:n,ref:this.setBeaconRef,title:p};let c;if(t){const g=t;c=m.createElement(g,{continuous:s,index:e,isLastStep:o,size:r,step:a,...u})}else c=m.createElement("button",{key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:d.beacon,type:"button",...u},m.createElement("span",{style:d.beaconInner}),m.createElement("span",{style:d.beaconOuter}));return c}};function zt({styles:t,...s}){const{color:e,height:o,width:i,...n}=t;return G.createElement("button",{style:n,type:"button",...s},G.createElement("svg",{height:typeof o=="number"?`${o}px`:o,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof i=="number"?`${i}px`:i,xmlns:"http://www.w3.org/2000/svg"},G.createElement("g",null,G.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:e}))))}var Ht=zt;function jt(t){const{backProps:s,closeProps:e,continuous:o,index:i,isLastStep:n,primaryProps:r,size:a,skipProps:d,step:p,tooltipProps:u}=t,{content:c,hideBackButton:g,hideCloseButton:b,hideFooter:C,locale:v,showProgress:N,showSkipButton:w,styles:S,title:P}=p,{back:_,close:O,last:F,next:j,skip:J}=v,E={primary:O};return o&&(E.primary=n?F:j,N&&(E.primary=m.createElement("span",null,E.primary," (",i+1,"/",a,")"))),E.primary&&(E.primary=m.createElement("button",{"data-test-id":"button-primary",style:S.buttonNext,type:"button",...r},E.primary)),w&&!n&&(E.skip=m.createElement("button",{"aria-live":"off","data-test-id":"button-skip",style:S.buttonSkip,type:"button",...d},J)),!g&&i>0&&(E.back=m.createElement("button",{"data-test-id":"button-back",style:S.buttonBack,type:"button",...s},_)),E.close=!b&&m.createElement(Ht,{"data-test-id":"button-close",styles:S.buttonClose,...e}),m.createElement("div",{key:"JoyrideTooltip","aria-label":k(P)||k(c),className:"react-joyride__tooltip",style:S.tooltip,...u},m.createElement("div",{style:S.tooltipContainer},P&&m.createElement("h1",{"aria-label":k(P),style:S.tooltipTitle},P),m.createElement("div",{style:S.tooltipContent},c)),!C&&m.createElement("div",{style:S.tooltipFooter},m.createElement("div",{style:S.tooltipFooterSpacer},E.skip),E.back,E.primary),E.close)}var Gt=jt,Vt=class extends m.Component{constructor(){super(...arguments),l(this,"handleClickBack",t=>{t.preventDefault();const{helpers:s}=this.props;s.prev()}),l(this,"handleClickClose",t=>{t.preventDefault();const{helpers:s}=this.props;s.close("button_close")}),l(this,"handleClickPrimary",t=>{t.preventDefault();const{continuous:s,helpers:e}=this.props;if(!s){e.close("button_primary");return}e.next()}),l(this,"handleClickSkip",t=>{t.preventDefault();const{helpers:s}=this.props;s.skip()}),l(this,"getElementsProps",()=>{const{continuous:t,isLastStep:s,setTooltipRef:e,step:o}=this.props,i=k(o.locale.back),n=k(o.locale.close),r=k(o.locale.last),a=k(o.locale.next),d=k(o.locale.skip);let p=t?a:n;return s&&(p=r),{backProps:{"aria-label":i,"data-action":"back",onClick:this.handleClickBack,role:"button",title:i},closeProps:{"aria-label":n,"data-action":"close",onClick:this.handleClickClose,role:"button",title:n},primaryProps:{"aria-label":p,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:p},skipProps:{"aria-label":d,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:d},tooltipProps:{"aria-modal":!0,ref:e,role:"alertdialog"}}})}render(){const{continuous:t,index:s,isLastStep:e,setTooltipRef:o,size:i,step:n}=this.props,{beaconComponent:r,tooltipComponent:a,...d}=n;let p;if(a){const u={...this.getElementsProps(),continuous:t,index:s,isLastStep:e,size:i,step:d,setTooltipRef:o},c=a;p=m.createElement(c,{...u})}else p=m.createElement(Gt,{...this.getElementsProps(),continuous:t,index:s,isLastStep:e,size:i,step:n});return p}},Kt=class extends m.Component{constructor(){super(...arguments),l(this,"scope",null),l(this,"tooltip",null),l(this,"handleClickHoverBeacon",t=>{const{step:s,store:e}=this.props;t.type==="mouseenter"&&s.event!=="hover"||e.update({lifecycle:h.TOOLTIP})}),l(this,"setTooltipRef",t=>{this.tooltip=t}),l(this,"setPopper",(t,s)=>{var e;const{action:o,lifecycle:i,step:n,store:r}=this.props;s==="wrapper"?r.setPopper("beacon",t):r.setPopper("tooltip",t),r.getPopper("beacon")&&r.getPopper("tooltip")&&i===h.INIT&&r.update({action:o,lifecycle:h.READY}),(e=n.floaterProps)!=null&&e.getPopper&&n.floaterProps.getPopper(t,s)}),l(this,"renderTooltip",t=>{const{continuous:s,helpers:e,index:o,size:i,step:n}=this.props;return m.createElement(Vt,{continuous:s,helpers:e,index:o,isLastStep:o+1===i,setTooltipRef:this.setTooltipRef,size:i,step:n,...t})})}componentDidMount(){const{debug:t,index:s}=this.props;B({title:`step:${s}`,data:[{key:"props",value:this.props}],debug:t})}componentDidUpdate(t){var s;const{action:e,callback:o,continuous:i,controlled:n,debug:r,helpers:a,index:d,lifecycle:p,status:u,step:c,store:g}=this.props,{changed:b,changedFrom:C}=K(t,this.props),v=a.info(),N=i&&e!==y.CLOSE&&(d>0||e===y.PREV),w=b("action")||b("index")||b("lifecycle")||b("status"),S=C("lifecycle",[h.TOOLTIP,h.INIT],h.INIT),P=b("action",[y.NEXT,y.PREV,y.SKIP,y.CLOSE]),_=n&&d===t.index;if(P&&(S||_)&&o({...v,index:t.index,lifecycle:h.COMPLETE,step:t.step,type:x.STEP_AFTER}),c.placement==="center"&&u===f.RUNNING&&b("index")&&e!==y.START&&p===h.INIT&&g.update({lifecycle:h.READY}),w){const O=L(c.target),F=!!O;F&&yt(O)?(C("status",f.READY,f.RUNNING)||C("lifecycle",h.INIT,h.READY))&&o({...v,step:c,type:x.STEP_BEFORE}):(console.warn(F?"Target not visible":"Target not mounted",c),o({...v,type:x.TARGET_NOT_FOUND,step:c}),n||g.update({index:d+(e===y.PREV?-1:1)}))}C("lifecycle",h.INIT,h.READY)&&g.update({lifecycle:$(c)||N?h.TOOLTIP:h.BEACON}),b("index")&&B({title:`step:${p}`,data:[{key:"props",value:this.props}],debug:r}),b("lifecycle",h.BEACON)&&o({...v,step:c,type:x.BEACON}),b("lifecycle",h.TOOLTIP)&&(o({...v,step:c,type:x.TOOLTIP}),this.tooltip&&(this.scope=new Mt(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),C("lifecycle",[h.TOOLTIP,h.INIT],h.INIT)&&((s=this.scope)==null||s.removeScope(),g.cleanupPoppers())}componentWillUnmount(){var t;(t=this.scope)==null||t.removeScope()}get open(){const{lifecycle:t,step:s}=this.props;return $(s)||t===h.TOOLTIP}render(){const{continuous:t,debug:s,index:e,nonce:o,shouldScroll:i,size:n,step:r}=this.props,a=L(r.target);return!nt(r)||!T.domElement(a)?null:m.createElement("div",{key:`JoyrideStep-${e}`,className:"react-joyride__step"},m.createElement(pt,{...r.floaterProps,component:this.renderTooltip,debug:s,getPopper:this.setPopper,id:`react-joyride-step-${e}`,open:this.open,placement:r.placement,target:r.target},m.createElement(Ut,{beaconComponent:r.beaconComponent,continuous:t,index:e,isLastStep:e+1===n,locale:r.locale,nonce:o,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:i,size:n,step:r,styles:r.styles})))}},lt=class extends m.Component{constructor(t){super(t),l(this,"helpers"),l(this,"store"),l(this,"callback",r=>{const{callback:a}=this.props;T.function(a)&&a(r)}),l(this,"handleKeyboard",r=>{const{index:a,lifecycle:d}=this.state,{steps:p}=this.props,u=p[a];d===h.TOOLTIP&&r.code==="Escape"&&u&&!u.disableCloseOnEsc&&this.store.close("keyboard")}),l(this,"handleClickOverlay",()=>{const{index:r}=this.state,{steps:a}=this.props;M(this.props,a[r]).disableOverlayClose||this.helpers.close("overlay")}),l(this,"syncState",r=>{this.setState(r)});const{debug:s,getHelpers:e,run:o,stepIndex:i}=t;this.store=_t({...t,controlled:o&&T.number(i)}),this.helpers=this.store.getHelpers();const{addListener:n}=this.store;B({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:s}),n(this.syncState),e&&e(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!I())return;const{debug:t,disableCloseOnEsc:s,run:e,steps:o}=this.props,{start:i}=this.store;Z(o,t)&&e&&i(),s||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(t,s){if(!I())return;const{action:e,controlled:o,index:i,lifecycle:n,status:r}=this.state,{debug:a,run:d,stepIndex:p,steps:u}=this.props,{stepIndex:c,steps:g}=t,{reset:b,setSteps:C,start:v,stop:N,update:w}=this.store,{changed:S}=K(t,this.props),{changed:P,changedFrom:_}=K(s,this.state),O=M(this.props,u[i]),F=!at(g,u),j=T.number(p)&&S("stepIndex"),J=L(O.target);if(F&&(Z(u,a)?C(u):console.warn("Steps are not valid",u)),S("run")&&(d?v(p):N()),j){let A=T.number(c)&&c<p?y.NEXT:y.PREV;e===y.STOP&&(A=y.START),[f.FINISHED,f.SKIPPED].includes(r)||w({action:e===y.CLOSE?y.CLOSE:A,index:p,lifecycle:h.INIT})}!o&&r===f.RUNNING&&i===0&&!J&&(this.store.update({index:i+1}),this.callback({...this.state,type:x.TARGET_NOT_FOUND,step:O}));const E={...this.state,index:i,step:O};if(P("action",[y.NEXT,y.PREV,y.SKIP,y.CLOSE])&&P("status",f.PAUSED)){const A=M(this.props,u[s.index]);this.callback({...E,index:s.index,lifecycle:h.COMPLETE,step:A,type:x.STEP_AFTER})}if(P("status",[f.FINISHED,f.SKIPPED])){const A=M(this.props,u[s.index]);o||this.callback({...E,index:s.index,lifecycle:h.COMPLETE,step:A,type:x.STEP_AFTER}),this.callback({...E,type:x.TOUR_END,step:A,index:s.index}),b()}else _("status",[f.IDLE,f.READY],f.RUNNING)?this.callback({...E,type:x.TOUR_START}):(P("status")||P("action",y.RESET))&&this.callback({...E,type:x.TOUR_STATUS});this.scrollToStep(s),O.placement==="center"&&r===f.RUNNING&&n===h.INIT&&this.store.update({lifecycle:h.READY})}componentWillUnmount(){const{disableCloseOnEsc:t}=this.props;t||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(t){const{index:s,lifecycle:e,status:o}=this.state,{debug:i,disableScrollParentFix:n=!1,scrollDuration:r,scrollOffset:a=20,scrollToFirstStep:d=!1,steps:p}=this.props,u=M(this.props,p[s]),c=L(u.target),g=xt({isFirstStep:s===0,lifecycle:e,previousLifecycle:t.lifecycle,scrollToFirstStep:d,step:u,target:c});if(o===f.RUNNING&&g){const b=W(c,n),C=Y(c,n);let v=Math.floor(St(c,a,n))||0;B({title:"scrollToStep",data:[{key:"index",value:s},{key:"lifecycle",value:e},{key:"status",value:o}],debug:i});const N=this.store.getPopper("beacon"),w=this.store.getPopper("tooltip");if(e===h.BEACON&&N){const{offsets:S,placement:P}=N;!["bottom"].includes(P)&&!b&&(v=Math.floor(S.popper.top-a))}else if(e===h.TOOLTIP&&w){const{flipped:S,offsets:P,placement:_}=w;["top","right","left"].includes(_)&&!S&&!b?v=Math.floor(P.popper.top-a):v-=u.spotlightPadding}v=v>=0?v:0,o===f.RUNNING&&Et(v,{element:C,duration:r}).then(()=>{setTimeout(()=>{var S;(S=this.store.getPopper("tooltip"))==null||S.instance.update()},10)})}}render(){if(!I())return null;const{index:t,lifecycle:s,status:e}=this.state,{continuous:o=!1,debug:i=!1,nonce:n,scrollToFirstStep:r=!1,steps:a}=this.props,d=e===f.RUNNING,p={};if(d&&a[t]){const u=M(this.props,a[t]);p.step=m.createElement(Kt,{...this.state,callback:this.callback,continuous:o,debug:i,helpers:this.helpers,nonce:n,shouldScroll:!u.disableScrolling&&(t!==0||r),step:u,store:this.store}),p.overlay=m.createElement(Ft,{id:"react-joyride-portal"},m.createElement(Bt,{...u,continuous:o,debug:i,lifecycle:s,onClickOverlay:this.handleClickOverlay}))}return m.createElement("div",{className:"react-joyride"},p.step,p.overlay)}};l(lt,"defaultProps",wt);var se=lt;export{y as A,se as c};
